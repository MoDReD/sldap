{% extends "base.twig" %}

{% block content %}
    <h3>Шаблоны прокси сервера</h3>

    <div>Поиск:<input ng-model="search"><br>

    <table cellspacing='10' id='patterns'>
        <thead>
            <tr>
                <td>[]</td>
                <td><a href="#" ng-click="sortType = 'name'; sortReverse = !sortReverse">Название шаблона</a></td>
                <td><a href="#" ng-click="sortType = 'allowedTraffic'; sortReverse = !sortReverse">Объем траффика</a></td>
                <td><a href="#" ng-click="sortType = 'sitesAccess'; sortReverse = !sortReverse">Доступ к запрещенным сайтам</a></td>
            </tr>
        </thead>

        <tbody>
            <tr ng-repeat="pattern in patterns | orderBy:sortType:sortReverse | filter:search">
                {% verbatim %}
                    <td><input type="checkbox" ng-click="switchSelectedPattern(pattern)" /></td>
                    <td>{{ pattern.label }}</td>
                    <td>{{ pattern.allowedTraffic }}</td>
                    <td>{{ pattern.sitesAccess }}</td>
                {% endverbatim %}
            </tr>
        </tbody>
    </table>

    <script>
        $(function(){
            getPatternsForList();
        });
    </script>
    </div>
{% endblock %}

{% block panel %}
    <button onclick='selectAll()'>Выделить все</button>
    <button onclick='cleanSelectAll()'>Снять выделение</button>
    <button onclick="window.location.pathname='/create_pattern'">Создать</button>
    <button onclick="showFormCreatePattern(scopeAccess.selectedPatterns)">Изменить</button>
    <button onclick='deletePattern()'>Удалить</button>
{% endblock %}